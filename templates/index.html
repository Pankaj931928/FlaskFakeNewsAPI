<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fake News Detector | Project</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <div id="initial-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>üì∞ Welcome to FactCheck!</h2>
            <p>Please log in or continue as a guest.</p>
            <div class="modal-options">
                <button class="btn btn-primary" id="login-btn">Login</button>
                <button class="btn btn-secondary" id="signup-btn">Sign Up</button>
                <button class="btn btn-guest" onclick="closeModal()">Continue as Guest</button>
            </div>
            
            <div id="auth-forms" style="display:none;">
                <form id="login-form" class="auth-form">
                    <input type="email" placeholder="Email" name="email" required>
                    <input type="password" placeholder="Password" name="password" required>
                    <div id="login-message" style="color: red; margin-bottom: 10px; font-size: 0.9em;"></div>
                    <button type="submit" class="btn btn-primary">Login</button>
                </form>

                <form id="signup-form" class="auth-form" style="display:none;">
                    <input type="text" placeholder="Name (Username)" name="username" required>
                    <input type="email" placeholder="Email" name="email" required>
                    <input type="password" placeholder="Password" name="password" required>
                    
                    <select name="gender" required>
                        <option value="" disabled selected>Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                    <input type="date" placeholder="Birth Date" name="birth_date" required> 
                    
                    <div id="signup-message" style="color: red; margin-bottom: 10px; font-size: 0.9em;"></div>
                    <button type="submit" class="btn btn-secondary">Sign Up</button>
                </form>
            </div>
        </div>
    </div>

    <main id="main-content" style="display:none;">
        <div id="user-header-icon" style="position: absolute; top: 30px; right: 30px;">
            <a href="#" onclick="showInput('profile'); return false;">
                <img id="avatar-icon" src="{{ url_for('static', filename='image/default_male.webp') }}" 
                     alt="User Avatar" style="width: 45px; height: 45px; border-radius: 50%; border: 2px solid #007bff; cursor: pointer;">
            </a>
        </div>

        <h1>Text & URL Fact Checker</h1>

        <div class="tab-buttons">
            <button id="text-tab" class="active" onclick="showInput('text')">Text Input</button>
            <button id="url-tab" onclick="showInput('url')">URL Input</button>
            <button id="tools-tab" onclick="showInput('tools')">Pro Tools</button>
            <button id="profile-tab" onclick="showInput('profile')">My Profile</button> 
        </div>

        <div id="text-input" class="input-section">
            <textarea id="news-text" placeholder="Paste your news text here..." rows="8"></textarea>
            <button class="btn btn-check" onclick="sendNews('text')">Check Text</button>
        </div>

        <div id="url-input" class="input-section" style="display:none;">
            <input type="url" id="news-url" placeholder="Paste the news URL here...">
            <button class="btn btn-check" onclick="sendNews('url')">Check URL</button>
        </div>
        
        <div id="tools-input" class="input-section" style="display:none;">
            <div id="pro-features-guest" style="display:none; text-align:center;">
                 <h3 style="color:#ff5e57;">üîí Pro Tools Locked</h3>
                 <p>Please log in to access Text Speaker and Translation services.</p>
            </div>

            <div id="pro-features-logged-in" style="display:none;">
                <div class="tool-card">
                    <h3>üîä Text Speaker</h3>
                    <p>Listen to the news you pasted for accessibility.</p>
                    <button class="btn btn-secondary" onclick="speakText()">Speak Text</button>
                </div>
                <div class="tool-card">
                    <h3>üåê Translate</h3>
                    <p>Translate the text between English and Hindi.</p>
                    <button class="btn btn-primary" onclick="translateText()">Translate (Mock)</button>
                </div>
            </div>
        </div>
        
        <div id="profile-input" class="input-section" style="display:none;">
            <div class="tool-card profile-card">
                <h2 style="color: #007bff; margin-bottom: 20px;">üë§ My Profile Dashboard</h2>
                
                <div style="text-align: center; margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px;">
                    <img id="profile-avatar" src="{{ url_for('static', filename='image/default_male.webp') }}" 
                         alt="Profile Photo" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid #ff5e57; margin-bottom: 15px;">
                    
                    <input type="file" id="image-upload-input" accept="image/*" style="display: none;">
                    <button class="btn btn-secondary" onclick="document.getElementById('image-upload-input').click()">
                        Change Profile Photo
                    </button>
                </div>
                
                <div class="profile-details-grid">
                    <h4>Name: <span id="profile-username" class="detail-value">Guest User</span></h4>
                    <h4>Email: <span id="profile-email" class="detail-value">guest@factcheck.com</span></h4>
                    <h4>Gender: <span id="profile-gender" class="detail-value">Not set</span></h4>
                    <h4>Birth Date: <span id="profile-birthdate" class="detail-value">--/--/----</span></h4>
                </div>

                <button class="btn btn-check" onclick="logoutUser()" style="background-color: #ea4335; margin-top: 30px;">
                    Log Out
                </button>
            </div>
        </div>
        <div id="result-box" class="result"></div>
        
        <h2 style="text-align: center; margin-top: 50px; color: #4b6cb7;">Verified News Sources</h2>
        <div id="news-cards-section" class="card-grid">
            <a href="https://www.aajtak.in/" target="_blank" class="news-card">
                <img src="{{ url_for('static', filename='image/aajtak.jpeg') }}" alt="Aaj Tak Logo">
                <p>Aaj Tak</p>
            </a>
            <a href="https://www.ndtv.com/" target="_blank" class="news-card">
                <img src="{{ url_for('static', filename='image/ndtv.png') }}" alt="NDTV Logo">
                <p>NDTV</p>
            </a>
            <a href="https://www.abplive.com/" target="_blank" class="news-card">
                <img src="{{ url_for('static', filename='image/abp.jpg') }}" alt="ABP News Logo">
                <p>ABP News</p>
            </a>
            <a href="https://timesofindia.indiatimes.com/" target="_blank" class="news-card">
                <img src="{{ url_for('static', filename='image/toi.png') }}" alt="TOI Logo">
                <p>Times of India</p>
            </a>
        </div>
    </main>
    
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script src="{{ url_for('static', filename='matrix_rain.js') }}"></script>
</body>
</html>